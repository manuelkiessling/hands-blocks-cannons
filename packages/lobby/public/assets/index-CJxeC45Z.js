(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const L={appSelect:document.getElementById("app-select-screen"),start:document.getElementById("start-screen"),botSettings:document.getElementById("bot-settings"),loading:document.getElementById("loading-screen"),gameReady:document.getElementById("game-ready"),error:document.getElementById("error-screen")};function a(e){for(const[t,o]of Object.entries(L))o&&o.classList.toggle("active",t===e)}let y=[],u=null,c=null;const d=document.getElementById("app-grid"),h=document.getElementById("selected-app-name"),S=document.getElementById("back-to-apps"),p=document.getElementById("play-bot"),w=document.getElementById("play-human"),A=document.getElementById("back-from-bot"),C=document.getElementById("start-bot-game"),E=document.getElementById("difficulty"),B=document.getElementById("loading-text"),g=document.getElementById("share-section"),m=document.getElementById("share-url"),l=document.getElementById("copy-url"),k=document.getElementById("cancel-game"),r=document.getElementById("join-game"),v=document.getElementById("error-message"),x=document.getElementById("try-again");async function T(){const e=await fetch("/api/sessions/apps");if(!e.ok)throw new Error("Failed to fetch applications");return(await e.json()).apps}async function j(e,t,o){const i=await fetch("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:e,opponentType:t,botDifficulty:o})});if(!i.ok){const n=await i.json();throw new Error(n.error||"Failed to create session")}return i.json()}async function N(e){await fetch(`/api/sessions/${e}`,{method:"DELETE"})}function O(e){if(d){if(e.length===0){d.innerHTML=`
      <div class="no-apps">
        <p>No applications available</p>
      </div>
    `;return}d.innerHTML=e.map(t=>`
      <button class="app-card" data-app-id="${t.id}">
        <span class="app-name">${t.name}</span>
        ${t.description?`<span class="app-desc">${t.description}</span>`:""}
        ${t.tags&&t.tags.length>0?`<div class="app-tags">${t.tags.map(o=>`<span class="tag">${o}</span>`).join("")}</div>`:""}
      </button>
    `).join("");for(const t of d.querySelectorAll(".app-card"))t.addEventListener("click",()=>{const o=t.getAttribute("data-app-id"),i=e.find(n=>n.id===o);i&&$(i)})}}function $(e){u=e,h&&(h.textContent=e.name),p&&(e.supportsBot?p.classList.remove("hidden"):p.classList.add("hidden")),a("start")}function P(){u=null,a("appSelect")}function G(){a("botSettings")}function F(){I("human")}function U(){a("start")}function H(){const e=E?Number(E.value)/100:.5;I("bot",e)}const M=4;async function I(e,t){if(!u){b("No application selected");return}a("loading"),B&&(B.textContent="Creating session...");try{c=await j(u.id,e,t),a("gameReady"),g&&m&&(e==="human"&&c.joinUrl?(g.classList.remove("hidden"),m.value=c.joinUrl):g.classList.add("hidden")),R()}catch(o){b(o instanceof Error?o.message:"An unexpected error occurred")}}function R(){if(!r)return;r.setAttribute("disabled","true");let e=M;const t=()=>{r&&(r.textContent=`Preparing... ${e}s`)};t();const o=setInterval(()=>{e--,e<=0?(clearInterval(o),r&&(r.removeAttribute("disabled"),r.textContent="Join")):t()},1e3)}function D(){m&&navigator.clipboard.writeText(m.value).then(()=>{const e=l?.textContent;l&&(l.textContent="‚úì",setTimeout(()=>{l.textContent=e??"üìã"},2e3))})}async function J(){if(c){try{await N(c.sessionId)}catch{}c=null}a("start")}function _(){c&&(window.location.href=c.gameUrl)}function b(e){v&&(v.textContent=e),a("error")}function q(){c=null,a(u?"start":"appSelect")}S?.addEventListener("click",P);p?.addEventListener("click",G);w?.addEventListener("click",F);A?.addEventListener("click",U);C?.addEventListener("click",H);l?.addEventListener("click",D);k?.addEventListener("click",J);r?.addEventListener("click",_);x?.addEventListener("click",q);async function Y(){a("appSelect");try{y=await T(),O(y)}catch{d&&(d.innerHTML=`
        <div class="error-content">
          <span class="error-icon">‚ö†Ô∏è</span>
          <p>Failed to load applications</p>
          <button class="btn primary" onclick="location.reload()">Retry</button>
        </div>
      `)}}Y();
//# sourceMappingURL=index-CJxeC45Z.js.map
