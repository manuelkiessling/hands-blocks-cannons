(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const S={appSelect:document.getElementById("app-select-screen"),start:document.getElementById("start-screen"),botSettings:document.getElementById("bot-settings"),loading:document.getElementById("loading-screen"),sessionReady:document.getElementById("session-ready"),error:document.getElementById("error-screen")};function i(e){for(const[t,s]of Object.entries(S))s&&s.classList.toggle("active",t===e)}let g=[],u=null,a=null;const d=document.getElementById("app-grid"),h=document.getElementById("selected-app-name"),L=document.getElementById("back-to-apps"),p=document.getElementById("play-bot"),w=document.getElementById("play-human"),A=document.getElementById("back-from-bot"),C=document.getElementById("start-bot-session"),E=document.getElementById("difficulty"),B=document.getElementById("loading-text"),y=document.getElementById("share-section"),f=document.getElementById("share-url"),l=document.getElementById("copy-url"),k=document.getElementById("cancel-session"),r=document.getElementById("join-session"),v=document.getElementById("error-message"),x=document.getElementById("try-again");async function T(){const e=await fetch("/api/sessions/apps");if(!e.ok)throw new Error("Failed to fetch applications");return(await e.json()).apps}async function j(e,t,s){const c=await fetch("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appId:e,opponentType:t,botDifficulty:s})});if(!c.ok){const n=await c.json();throw new Error(n.error||"Failed to create session")}return c.json()}async function N(e){await fetch(`/api/sessions/${e}`,{method:"DELETE"})}function O(e){if(d){if(e.length===0){d.innerHTML=`
      <div class="no-apps">
        <p>No applications available</p>
      </div>
    `;return}d.innerHTML=e.map(t=>`
      <button class="app-card" data-app-id="${t.id}">
        <span class="app-name">${t.name}</span>
        ${t.description?`<span class="app-desc">${t.description}</span>`:""}
        ${t.tags&&t.tags.length>0?`<div class="app-tags">${t.tags.map(s=>`<span class="tag">${s}</span>`).join("")}</div>`:""}
      </button>
    `).join("");for(const t of d.querySelectorAll(".app-card"))t.addEventListener("click",()=>{const s=t.getAttribute("data-app-id"),c=e.find(n=>n.id===s);c&&$(c)})}}function $(e){u=e,h&&(h.textContent=e.name),p&&(e.supportsBot?p.classList.remove("hidden"):p.classList.add("hidden")),i("start")}function P(){u=null,i("appSelect")}function F(){i("botSettings")}function U(){I("human")}function H(){i("start")}function M(){const e=E?Number(E.value)/100:.5;I("bot",e)}const R=4;async function I(e,t){if(!u){b("No application selected");return}i("loading"),B&&(B.textContent="Creating session...");try{a=await j(u.id,e,t),i("sessionReady"),y&&f&&(e==="human"&&a.joinUrl?(y.classList.remove("hidden"),f.value=a.joinUrl):y.classList.add("hidden")),D()}catch(s){b(s instanceof Error?s.message:"An unexpected error occurred")}}function D(){if(!r)return;r.setAttribute("disabled","true");let e=R;const t=()=>{r&&(r.textContent=`Preparing... ${e}s`)};t();const s=setInterval(()=>{e--,e<=0?(clearInterval(s),r&&(r.removeAttribute("disabled"),r.textContent="Join")):t()},1e3)}function J(){f&&navigator.clipboard.writeText(f.value).then(()=>{const e=l?.textContent;l&&(l.textContent="‚úì",setTimeout(()=>{l.textContent=e??"üìã"},2e3))})}async function _(){if(a){try{await N(a.sessionId)}catch{}a=null}i("start")}function q(){a&&(window.location.href=a.sessionUrl)}function b(e){v&&(v.textContent=e),i("error")}function Y(){a=null,i(u?"start":"appSelect")}L?.addEventListener("click",P);p?.addEventListener("click",F);w?.addEventListener("click",U);A?.addEventListener("click",H);C?.addEventListener("click",M);l?.addEventListener("click",J);k?.addEventListener("click",_);r?.addEventListener("click",q);x?.addEventListener("click",Y);async function G(){i("appSelect");try{g=await T(),O(g)}catch{d&&(d.innerHTML=`
        <div class="error-content">
          <span class="error-icon">‚ö†Ô∏è</span>
          <p>Failed to load applications</p>
          <button class="btn primary" onclick="location.reload()">Retry</button>
        </div>
      `)}}G();
//# sourceMappingURL=index-CRRJC5wf.js.map
